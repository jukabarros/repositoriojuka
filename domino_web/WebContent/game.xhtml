<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>TCP DOMINO GAME</title>

</h:head>
<f:view encoding="ISO-8859-1">
<h:body>

	<h3><b><h:outputLabel>TCP DOMINÓ GAME</h:outputLabel></b></h3>
	<h:form id="formHeader">
		<div align="right">
			<!-- CRIAR FORM MODAL EDITAR DADOS PESSOAIS -->
			<h:commandLink action="#{loginController.logout}" value="Alterar Senha" />
			<h:outputLabel> | </h:outputLabel>
			<h:commandLink action="#{loginController.logout}" value="Alterar Dados Pessoais" />
			<h:outputLabel> | </h:outputLabel>
			<h:commandLink action="#{gameController.logout}" value="Sair" />
		</div>
	</h:form>
	
	<hr />
	
	<!-- TABLE PRINCIPAL -->
	
	<table id="principal" border="1" style="width: 1200px" align="center">
	<tr> 
	  <td valign="top">
	  
	  	<!-- TABLE CHAT -->
	  	
		<table style="width: 600px" >
		  <tr>
			<td align="left" id="chatTable" style="width: 600px">
			<p:panel header="Chat" id="panelChat" style="width:600px;">
			
     		  <h:form id="formChatList">
     		  
				<p:dataTable value="#{gameController.msgChatList}" var="msgChatList" id="chatDatalist"		       			 
		       			 scrollHeight="400" 
		       			 scrollable="true"
		       			 scrollRows="15" 		       			 
		       			 emptyMessage="Sem mensagens">
			     	<p:column style="white-space:normal !important;">
			            <b>
			              <h:outputText value="#{msgChatList.login}, #{msgChatList.dateString}:" style="margin-left:10px; font-size: 14px" />
			            </b>
			            <h:outputText value="#{msgChatList.msg}" style="margin-left:10px; font-size: 14px" />
			     	</p:column>
					
		    	</p:dataTable>
		            <br />
				</h:form>
				<h:form id="formChatSendMsg">
	     		  	<p:messages autoUpdate="true" />
			      <h:panelGrid columns="2" id ="textChat" cellpadding="4">
					<p:inputTextarea maxlength="250" autoResize="false"
						 cols="3" rows="3" value="#{gameController.msgChat.msg}"
						  style="resize: none; width:500px;" required="true" requiredMessage="Insira uma mensagem" />
					<h:commandButton action="#{gameController.sendChatMsg}" alt="Enviar Mensagem" image="img/buttonSend2.png" />
		    	 </h:panelGrid>
				</h:form>
			</p:panel>
			</td>
			</tr>
		</table>
		</td>
		<!-- Fim da coluna 1 -->
			<!-- TABLE ONLINE -->

		<td valign="top">
		<table style="width: 300px">
			<tr> 
    		<td align="left" id="onlineTable" style="width: 300px" valign="top">
	    	<p:panel header="Players Online" id="panelPlayerOnline" style="width:300px;">
	    	 
		    <h:form id="formPlayerOnline">
             
			<p:poll interval="3" listener="#{playerController.refreshListPlayerOnline}" update="playerListOnline" />

		    <p:dataList value="#{playerController.playerList}" var="playerList" id="playerListOnline"
		        paginator="true" rows="50"
		        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink}"
		        type="none" style="width:300px">
		 
		            <p:commandButton icon="ui-icon-search" process="@this"  update=":formPlayerOnline" oncomplete="playerDialog.show()" title="Ver Detalhes">
		                <f:setPropertyActionListener value="#{playerList}" target="#{playerController.player}" />
		            </p:commandButton>
		 
		            <h:outputText value="#{playerList.login}, #{playerList.score}" style="margin-left:10px" />
		            <br />
		            
		    </p:dataList>
		     
		    <p:dialog header="Detalhe" widgetVar="playerDialog" modal="true" >
		        <p:outputPanel id="playerDetail" style="text-align:center;" layout="block">
		         
		            <h:panelGrid  columns="2" cellpadding="5">
		                <h:outputLabel for="playerName" value="Nome: " />
		                <h:outputText id="playerName" value="#{playerController.player.name}" />
		                 
		                <h:outputLabel for="playerSex" value="Sexo: " />
		                <h:outputText id="playerSex" value="#{playerController.player.sex}" />
		                 
		                <h:outputLabel for="playerScore" value="Pontuação: " />
		                <h:outputText id="playerScore" value="#{playerController.player.score}"/>

		            </h:panelGrid>
		             <h:commandButton  type="button" value="Fechar" onclick="playerDialog.hide()"/> <!-- FECHANDO O DIALOG -->
		        </p:outputPanel>
		    </p:dialog>
		</h:form>
		</p:panel>
			 
			 </td>
			</tr>
		</table>
		</td>
		<!-- Fim da Coluna 2 -->
		

	<td valign="top"> 
	  <!-- TABLE ROOM -->
  
	<table id="roomTable" style="width: 300px" >
		  <tr>
			<td align="left" id="rooms" style="width: 300px" bgcolor="orange">
				ROOMS
			</td>
		 </tr>	
	</table>
	  
	</td>
	<!--  Fim da coluna 3 -->
	  

	<!-- FIM TABLE PRINCIPAL -->  
	</tr> 
	</table> 
		
</h:body>
</f:view>
</html>
